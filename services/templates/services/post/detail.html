{% extends 'base.html' %}
{% load static %}
{% load staticfiles %}
{% load i18n %}

{% block title %}
    post
{% endblock %}

{% block content %}
    <div class="header-wrapper sm-padding bg-grey">
        <div class="container">
            <div class="col-md-6 {% if request.LANGUAGE_CODE == 'ar' %}pull-right{% endif %}">
                <h2>{% if request.LANGUAGE_CODE == 'ar' %}{{ post.ar_title }}{% else %}
                    {{ post.en_title }}{% endif %}</h2>
            </div>
            <div class="col-6">
                <ul class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{% url 'service:list_create' %}">
                        {% trans 'All services' %}</a>
                    </li>
                    <li class="breadcrumb-item"><a href="{{ service.get_absolute_url }}">
                        {% if request.LANGUAGE_CODE == 'ar' %}{{ service.ar_name }}{% else %}
                            {{ service.en_name }}{% endif %}</a>
                    </li>
                    <li class="breadcrumb-item active">
                        {% if request.LANGUAGE_CODE == 'ar' %}{{ post.ar_title }}{% else %}
                            {{ post.en_title }}{% endif %}</li>
                </ul>
            </div>
        </div>
        {% if request.user.is_authenticated %}
            <br>
            <div class="container">
                <button data-toggle="modal" data-target="#postFormModal" class="btn btn-warning"><i
                        class="fa fa-edit"></i> {% trans 'Edit' %}</button>
                {% include 'services/post/modal.html' %}
                <a class="btn btn-danger" href="{% url 'post:post_delete' post.slug %}"><i
                        class="fa fa-trash"></i> {% trans 'Delete' %}</a>
            </div>
        {% endif %}
    </div>

    <div id="blog" class="section md-padding">
        <!-- Row -->
        <div class="row">
            <!-- Main -->
            <div class="container">
                <div class="col-md-6">
                    <img class="img-responsive" src="
                {% if post.image %}{{ post.image.url }}{% else %}{% static 'services/image/blog1.jpg' %}{% endif %}"/>
                </div>
                <div class="text-justify col-md-6">
                    <h3>{% if request.LANGUAGE_CODE == 'ar' %}{{ post.ar_title }}{% else %}
                        {{ post.en_title }}{% endif %}</h3>
                    <p>{% if request.LANGUAGE_CODE == 'ar' %}{{ post.ar_body|safe }}{% else %}
                        {{ post.en_body|safe }}{% endif %}</p>
                </div>
                <!-- blog comments -->
                <div class="blog-comments">
                    {% if post.comments %}
                        <h3 class="title">({{ post.comments.count }}) Comment{{ post.comments.count|pluralize }}</h3>
                    {% endif %}
                    {% for comment in post.comments.all %}
                        <!-- comment -->
                        <div class="media author" style="border-radius: 7px;">
                            <div class="media-body">
                                <h4 class="media-heading">{{ comment.name }}
                                    {% if request.user.is_authenticated %}
                                        <a href="{% url 'comment:comment_delete' comment.pk %}" class="reply text-danger">{% trans 'Remove' %} <i
                                                class="fa fa-trash"></i></a>
                                    {% endif %}
                                </h4>
                                <p>{{ comment.comment|linebreaks }}</p>
                            </div>
                        </div><br>
                    {% empty %}
                        <!-- blog comments -->
                        <div class="blog-comments text-center">
                            <div class="media-body">
                                <p class="text-muted">{% trans 'No comments ...' %}</p>
                            </div>
                        </div>
                        <!-- /comment -->
                    {% endfor %}
                </div>
                <button data-toggle="modal" data-target="#postCommentFormModal" class="main-btn"><i
                        class="fa fa-comment"></i> {% trans 'Comment' %}</button>
                {% include 'services/comment/modal.html' %}
            </div>
        </div>
        <br>
    </div>
{% endblock %}

{% block js %}
    <script type="text/javascript" src="{% static "ckeditor/ckeditor-init.js" %}"></script>
    <script type="text/javascript" src="{% static "ckeditor/ckeditor/ckeditor.js" %}"></script>
{% endblock %}